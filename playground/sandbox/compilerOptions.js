define(["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createURLQueryWithCompilerOptions=t.getCompilerOptionsFromParams=t.getDefaultSandboxCompilerOptions=void 0,t.getDefaultSandboxCompilerOptions=function(e,t){const n="js"===e.filetype,s={strict:!0,noImplicitAny:!0,strictNullChecks:!n,strictFunctionTypes:!0,strictPropertyInitialization:!0,strictBindCallApply:!0,noImplicitThis:!0,noImplicitReturns:!0,noUncheckedIndexedAccess:!1,useDefineForClassFields:!1,alwaysStrict:!0,allowUnreachableCode:!1,allowUnusedLabels:!1,downlevelIteration:!1,noEmitHelpers:!1,noLib:!1,noStrictGenericChecks:!1,noUnusedLocals:!1,noUnusedParameters:!1,esModuleInterop:!0,preserveConstEnums:!1,removeComments:!1,skipLibCheck:!1,checkJs:n,allowJs:n,declaration:!0,importHelpers:!1,experimentalDecorators:!0,emitDecoratorMetadata:!0,moduleResolution:t.languages.typescript.ModuleResolutionKind.NodeJs,target:t.languages.typescript.ScriptTarget.ES2017,jsx:t.languages.typescript.JsxEmit.React,module:t.languages.typescript.ModuleKind.ESNext};return Object.assign(Object.assign({},s),e.compilerOptions)},t.getCompilerOptionsFromParams=(e,t,n)=>{const s={};return n.forEach(((n,o)=>{if(e[o]){let t;"true"===n&&!0!==e[o]?t=!0:"false"===n&&!1!==e[o]?t=!1:isNaN(parseInt(n,10))||e[o]===parseInt(n,10)||(t=parseInt(n,10)),void 0!==t&&(s[o]=t)}else if(t.optionDeclarations.find((e=>e.name===o))){let e=!0;"false"===n&&(e=!1),isNaN(parseInt(n,10))||(e=parseInt(n,10)),s[o]=e}})),s},t.createURLQueryWithCompilerOptions=(e,t)=>{const n=e,s=new URLSearchParams(document.location.search),o=n.getCompilerOptions(),i=n.compilerDefaults,r=Object.entries(o).reduce(((e,[t,n])=>(n!==i[t]&&(e[t]=o[t]),e)),{}),l=`code/${n.lzstring.compressToEncodedURIComponent(n.getText())}`;let a=Object.assign({},r);for(const e of["lib","ts"]){const t=new URLSearchParams(location.search);t.has(e)&&("ts"!==e||"Nightly"!==t.get(e)&&"next"!==t.get(e)?a.ts=t.get(e):a.ts=n.ts.version)}const c=n.editor.getSelection(),p=c&&c.selectionStartLineNumber!==c.positionLineNumber||c&&c.selectionStartColumn!==c.positionColumn,u=n.editor.getModel().getFullModelRange(),m=c&&c.selectionStartLineNumber===u.startLineNumber&&c.selectionStartColumn===u.startColumn&&c.positionColumn===u.endColumn&&c.positionLineNumber===u.endLineNumber;c&&p&&!m?(a.ssl=c.selectionStartLineNumber,a.ssc=c.selectionStartColumn,a.pln=c.positionLineNumber,a.pc=c.positionColumn):(a.ssl=void 0,a.ssc=void 0,a.pln=void 0,a.pc=void 0),"ts"!==n.config.filetype&&(a.filetype=n.config.filetype),t&&(a=Object.assign(Object.assign({},a),t));const d=s.keys().length>0;if(Object.keys(a).length>0||d){let e=Object.entries(a).filter((([e,t])=>void 0!==t)).filter((([e,t])=>null!==t)).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&");return s.forEach(((t,n)=>{["ssl","ssc","pln","pc"].includes(n)||e.includes(n)||o[n]||(e+=`&${n}=${t}`)})),`?${e}#${l}`}return`#${l}`}}));