/*! For license information please see serviceworker.js.LICENSE.txt */
(()=>{if("undefined"==typeof window){const e=self;e.addEventListener("install",(()=>e.skipWaiting())),e.addEventListener("activate",(r=>r.waitUntil(e.clients.claim()))),e.addEventListener("message",(r=>{r.data&&"deregister"===r.data.type&&e.registration.unregister().then((()=>e.clients.matchAll())).then((e=>{e.forEach((e=>e.navigate(e.url)))}))})),e.addEventListener("fetch",(function(e){"only-if-cached"===e.request.cache&&"same-origin"!==e.request.mode||e.respondWith(fetch(e.request).then((e=>{if(0===e.status)return e;const r=new Headers(e.headers);return r.set("Cross-Origin-Embedder-Policy","require-corp"),r.set("Cross-Origin-Opener-Policy","same-origin"),r.set("X-Frame-Options","DENY"),r.set("X-Content-Type-Options","nosniff"),r.set("Referrer-Policy","same-origin"),new Response(e.body,{status:e.status,statusText:e.statusText,headers:r})})))}))}else(()=>{const e=()=>window.location.reload(),r=navigator;!1===window.crossOriginIsolated&&(window.isSecureContext?r.serviceWorker&&r.serviceWorker.register(window.document.currentScript.src).then((t=>{console.log("COOP/COEP Service Worker registered",t.scope),t.addEventListener("updatefound",(()=>{console.log("Reloading page to make use of updated COOP/COEP Service Worker."),e()})),t.active&&!r.serviceWorker.controller&&(console.log("Reloading page to make use of COOP/COEP Service Worker."),e())}),(e=>{console.error("COOP/COEP Service Worker failed to register:",e)})):console.log("COOP/COEP Service Worker not registered, a secure context is required."))})()})();